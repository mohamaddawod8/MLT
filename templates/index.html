<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Recommendation System | Premium Dark</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0f172a;
            --card-dark: #1e293b;
            --accent-blue: #38bdf8;
            --accent-green: #22c55e;
            --text-pure: #ffffff;
            --text-light: #cbd5e1;
            --text-muted: #94a3b8;
        }

        body { 
            background-color: var(--bg-dark); 
            color: var(--text-pure); 
            font-family: 'Inter', system-ui, -apple-system, sans-serif; 
        }

        /* Sidebar Styling */
        .sidebar { 
            background: #111827; 
            padding: 30px; 
            min-height: 100vh; 
            border-right: 1px solid #334155; 
        }

        .sidebar h4 { color: var(--text-pure); border-bottom: 2px solid var(--accent-blue); padding-bottom: 10px; }

        /* Card Styling */
        .card { 
            background: var(--card-dark); 
            border: 1px solid #334155; 
            border-radius: 16px; 
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3); 
        }

        .section-title { 
            color: var(--accent-blue); 
            font-weight: 700; 
            text-transform: uppercase; 
            letter-spacing: 1.5px; 
            font-size: 0.85rem; 
        }

        /* Lists & Text Color */
        .text-white-custom { color: var(--text-pure) !important; }
        .text-light-custom { color: var(--text-light) !important; }

        .list-group-item { 
            background: transparent; 
            border: none; 
            color: var(--text-light); 
            padding: 14px 0; 
            border-bottom: 1px solid #334155; 
        }

        .list-group-item:last-child { border-bottom: none; }

        .badge-index { 
            background: var(--accent-blue); 
            color: #000; 
            font-weight: 800; 
            margin-right: 12px; 
        }

        /* Form Inputs */
        .form-select, .form-control { 
            background-color: #0f172a; 
            border: 1px solid #475569; 
            color: white; 
        }

        .form-select:focus { 
            background-color: #0f172a; 
            color: white; 
            border-color: var(--accent-blue); 
            box-shadow: 0 0 0 0.25rem rgba(56, 189, 248, 0.25); 
        }

        /* Boxes */
        .journey-box { 
            background: #020617; 
            border-radius: 12px; 
            padding: 25px; 
            border: 1px dashed var(--accent-blue); 
        }

        .dynamic-box { 
            background: rgba(34, 197, 94, 0.15); 
            border: 1px solid var(--accent-green); 
            padding: 25px; 
            border-radius: 12px; 
        }

        .btn-primary { 
            background-color: var(--accent-blue); 
            border: none; 
            color: #000; 
            font-weight: 700; 
            padding: 12px 25px;
        }

        .btn-primary:hover { background-color: #7dd3fc; transform: scale(1.02); }
    </style>
</head>
<body>
<div class="container-fluid">
    <div class="row">
        <div class="col-md-3 sidebar shadow">
            <h4 class="mb-5 fw-bold">ðŸ›  Control Panel</h4>
            <form method="POST" action="/">
                <div class="mb-4">
                    <label class="form-label text-light-custom small fw-bold">COUNTRY</label>
                    <select name="country" class="form-select form-select-lg shadow-sm" onchange="this.form.submit()">
                        {% for c in countries %}
                        <option value="{{c}}" {% if c == selected_country %}selected{% endif %}>{{c}}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="mb-4">
                    <label class="form-label text-light-custom small fw-bold">SOLUTION</label>
                    <select name="solution" class="form-select form-select-lg shadow-sm" onchange="this.form.submit()">
                        {% for s in solutions %}
                        <option value="{{s}}" {% if s == selected_solution %}selected{% endif %}>{{s}}</option>
                        {% endfor %}
                    </select>
                </div>
            </form>
            <form method="POST" action="/reset" class="mt-5 text-center">
                <button class="btn btn-outline-danger w-100 btn-sm">Clear Current Session</button>
            </form>
        </div>

        <div class="col-md-9 p-5">
            <header class="mb-5">
                <h1 class="fw-bold text-white-custom display-5">AI Action Recommender</h1>
                <p class="text-light-custom fs-5">SVU | MCS | MLT Project | By: mohammad_331189, mohammad_323455, rouaa_298365, ranim_326483</p>
            </header>
            
            <h6 class="section-title mb-4">Core Historical Intelligence</h6>
            <div class="row g-4 mb-5">
                <div class="col-md-4">
                    <div class="card p-4 h-100">
                        <h6 class="text-white-custom border-bottom border-secondary pb-2 mb-3">By Selected Country</h6>
                        <ul class="list-group">
                            {% for item in by_country %}
                            <li class="list-group-item"><span class="badge rounded-pill badge-index">{{loop.index}}</span> {{item}}</li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card p-4 h-100">
                        <h6 class="text-white-custom border-bottom border-secondary pb-2 mb-3">By Selected Solution</h6>
                        <ul class="list-group">
                            {% for item in by_solution %}
                            <li class="list-group-item"><span class="badge rounded-pill badge-index">{{loop.index}}</span> {{item}}</li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card p-4 h-100">
                        <h6 class="text-white-custom border-bottom border-secondary pb-2 mb-3">By Country & Solution</h6>
                        <ul class="list-group">
                            {% for item in by_both %}
                            <li class="list-group-item"><span class="badge rounded-pill badge-index">{{loop.index}}</span> {{item}}</li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>

            <h6 class="section-title mb-4">Interactive Strategy Engine</h6>
            <div class="card p-5 mb-4 shadow-lg">
                <form method="POST" action="/add_action" class="row g-3 align-items-end">
                    <div class="col-md-9">
                        <label class="form-label text-light-custom fw-bold">CHOOSE NEXT ACTION PERFORMED</label>
                        <select name="action_to_add" class="form-select form-select-lg">
                            {% for a in all_actions %} <option>{{a}}</option> {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-3">
                        <button type="submit" class="btn btn-primary btn-lg w-100 shadow">Record Action</button>
                    </div>
                </form>

                {% if current_path %}
                <div class="journey-box mt-5">
                    <h6 class="text-white-custom small fw-bold mb-3">ACCOUNT JOURNEY LOG</h6>
                    <div class="d-flex flex-wrap align-items-center">
                        {% for p in current_path %}
                        <span class="badge bg-dark border border-secondary p-3 text-white">{{ p }}</span>
                        {% if not loop.last %}<span class="mx-3 text-info fw-bold">âžœ</span>{% endif %}
                        {% endfor %}
                    </div>
                </div>
                
                <div class="dynamic-box mt-4">
                    <h6 class="text-success fw-bold mb-2">RECOMMENDED NEXT STEPS (ML BASED)</h6>
                    <h3 class="text-white-custom mb-0 fw-bold">{{ ", ".join(dynamic) }}</h3>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
</body>
</html>
